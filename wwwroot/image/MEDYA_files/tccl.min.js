!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("tccl",[],e):"object"==typeof exports?exports["tccl"]=e():t["tccl"]=e()}(window,function(){return n=[function(t,e,n){"use strict";e.parseCookie=e.isSupported=e.isCorporateHost=e.getWindow=e.getNavigator=e.getHost=e.getDocument=e.getBaseHost=void 0;n(2);function o(){return u.window}function r(){return u.document}var i,a,s,u=(i="",s={document:a=Object.create({get cookie(){return i},set cookie(t){i=t}})},n={},"undefined"==typeof window?{window:s,document:a,navigator:n}:{window:window||s,document:window.document||a,navigator:navigator||n});function c(){return u.navigator}function f(){var t=o().location;return t&&t.hostname?t.hostname:""}function p(){var t=f(),e=t.split(".");return t=2<=e.length&&"co.uk"===(t=e.splice(e.length-2).join("."))?e.pop()+"."+t:t}e.getBaseHost=p,e.getDocument=r,e.getHost=f,e.getNavigator=c,e.getWindow=o,e.isCorporateHost=function(t){t=t||p();return!!~t.indexOf("godaddy.com")||!!~t.indexOf("secureserver.net")},e.isSupported=function(){var t=c().userAgent.toLowerCase();return!/msie [1-8]\./.test(t)},e.parseCookie=function(t){for(var e=t.split(";"),n=Object.create(null),o=0;o<e.length;o++){var r,i=/([^=]*)*=([\s\S]*)/.exec(e[o]);i&&i[2]&&(r=i[1].trim(),i=decodeURIComponent(i[2].trim()),n[r]=i)}return n}},function(t,e,n){"use strict";e.__esModule=!0,e._errorInit=e._logInit=e.error=e.info=e.debug=e.log=void 0;function o(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.getWindow)().console,function(){}}function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.getWindow)().console,function(){}}var i=n(7),a=n(0),s=o(),n=r();e.log=s,e.debug=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];(0,i.isDebug)()&&s.apply(null,e)},e.info=s,e.error=n,e._logInit=o,e._errorInit=r},function(t,e,n){"use strict";function a(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=t[n];try{if(e(n,o))return t}catch(t){}}return t}function s(t){if(2===t.length)return t[1]}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={cleanKeyNames:function(o,r,i){o&&r&&a(o,function(t,e){var n=(t+"").split(r).join(i||"");delete o[t],o[n]=e})},map:a,merge:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var o={},r=0;r<e.length;r++){var i=e[r];"object"===(void 0===i?"undefined":u(i))&&a(i,function(t,e){o[t]=e})}return o},parseString:function(t,e,n){if("string"!=typeof t)return{};for(var o={},r=t.split(e),i=0;i<r.length;i++){var a=r[i].split(n);o[a[0]]=s(a)}return o},parseValue:s,stringify:function(t,e,n){var o=[];return a(t,function(t,e){o.push(""+t+n+e)}),0===o.length?"":o.join(e)},removeUndefined:function t(e){for(var n in e)void 0===e[n]?delete e[n]:"object"===u(e[n])&&(t(e[n]),0===Object.keys(e[n]).length&&delete e[n])}}},function(t,e,n){"use strict";e.getUnique=e.logToArray=e.isArray=void 0;function o(t){return"[object Array]"===Object.prototype.toString.call(t)}var r=n(13);e.isArray=o,e.logToArray=function(t,e){o(t)&&t.push({timestamp:(0,r.getISODate)(),data:e})},e.getUnique=function(t){return t&&t.filter(function(t,e,n){return e===n.indexOf(t)})}},function(t,e,n){"use strict";e.__esModule=!0,e.getConfig=void 0;var o,r=n(6);var i=new((o=r)&&o.__esModule?o:{default:o}).default;e.getConfig=function(t,e){t=i.get(t);if(t&&e)return t[e]};e.default=i},function(t,e,n){"use strict";e.libraryLoaded=e.setClientName=e.setWindowVar=e.setInternalVar=e.getInternalVar=void 0;function o(t,e){(0,i.getWindow)()[a]&&((0,i.getWindow)()[a][t]=e)}function r(t,e){(0,i.getWindow)()[t]=e,o(t,e)}var i=n(0),a=(n(1),void 0),s=void 0;e.getInternalVar=function(t){if((0,i.getWindow)()[a])return(0,i.getWindow)()[a][t]},e.setInternalVar=o,e.setWindowVar=r,e.setClientName=function(t){a="_"+(s=t)+"Internal"},e.libraryLoaded=function(){var t="_"+s+"PageReqFired";return!!(0,i.getWindow)()[t]||(r(t,!0),void 0!==(0,i.getWindow)()[a]||!((0,i.getWindow)()[a]={}))}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(2);o.prototype.clear=function(){this.properties={}},o.prototype.get=function(t){if(this.properties.hasOwnProperty(t))return this.properties[t]},o.prototype.set=function(t,e){this.properties[t]=e},o.prototype.isSet=function(t){if(this.properties.hasOwnProperty(t))return!0},o.prototype.delete=function(t){delete this.properties[t]},o.prototype.getProperties=function(t){var n={},o=t||"function"!=typeof t?function(){return!1}:t;return(0,r.map)(this.properties,function(t,e){o(t)||(n[t]=e)}),n},o.prototype.merge=function(t){var n=this,e=t;t instanceof o&&(e=t.getProperties()),(0,r.map)(e,function(t,e){n.set(t,e)})},n=o;function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.properties=t||{}}e.default=n},function(t,e,n){"use strict";var o=void 0,r=!1;e.isDebug=function(){return r},e.setDebug=function(t){r=!0===t||"true"===t},e.init=function(t){o=t},e.getEnvName=function(){return o}},function(t,e,n){"use strict";e.processPageLevelProperties=e.getPageLevelProperties=e.init=void 0;var o,r=n(3),i=n(5),a=n(7),s=n(0),u=(n(1),n(2)),c=n(4),f=(o=c)&&o.__esModule?o:{default:o};n(23);function p(t){for(var e,n=Array.isArray(r=m),o=0,r=n?r:r[Symbol.iterator]();;){if(n){if(o>=r.length)break;e=r[o++]}else{if((o=r.next()).done)break;e=o.value}var i=e;if(t.startsWith(i+"."))return!1}return!0}function l(t,e){"debug"===t&&(0,a.setDebug)(e)}function d(t){var i={identity:{realm:t["tcc.realm"]},site:{privateLabelId:t["tcc.privateLabelId"]},timing:{manual:t["tcc.manualPagePerf"]},page:{spa:t["tcc.spa"],id:t["tcc.pageId"],contentGroup:t["tcc.gaContentGroup"]||t["tcc.contentGroup"]},cookie:{sameSite:t["tcc.cookies.sameSite"]}};Object.keys(i).forEach(function(r){Object.keys(i[r]).forEach(function(t){var e,n,o;o=i[e=r][n=t],t=f.default.get(e)||{},o&&(t[n]=o),f.default.set(e,t)})})}function h(){var t=function(){for(var n={},t=0;t<g.length;t++){var e=g[t];(0,u.map)(e,function(t,e){~b.indexOf(t.toLowerCase())||(l(t,e),p(t)||(n[t]=e))})}return n}();d(t),f.default.merge(t),(0,r.logToArray)(v,t)}var y,g=void 0,v=[],m=void 0,b=void 0,_={},w=0;e.init=function(t,e,n){b=n||[],y=t,m=e,g=(0,s.getWindow)()[y]||[],(0,i.setWindowVar)(y,g),(0,i.setInternalVar)(y+"Log",v),h()},e.getPageLevelProperties=function(){return(0,u.merge)(_)},e.processPageLevelProperties=function(){for(;w<g.length;){var t=g[w];(0,u.map)(t,function(t,e){~b.indexOf(t.toLowerCase())||p(t)&&(l(t,e),_[t]=e)}),w++}}},function(t,e,n){"use strict";e.setCookie=e.findCookie=void 0;function o(t,e,n,o){var r=(0,s.getConfig)("cookie","sameSite")||"",i=new Date;i.setTime(i.getTime()+60*n*1e3),(0,a.getDocument)().cookie=t+"="+encodeURI(e)+"; domain="+(0,a.getBaseHost)()+"; "+(n?"expires="+i.toGMTString()+"; ":"")+(o?"path="+o+"; ":"")+(r?"SameSite="+r+"; ":"")+("NONE"==r.toUpperCase()?" Secure;":"")}function r(t){var e=(0,a.getDocument)().cookie;return i!==e&&(u=(0,a.parseCookie)(e),i=e),u[t]}var a=n(0),s=(n(2),n(4)),i=void 0,u=void 0;e.findCookie=r,e.setCookie=o},function(t,e,n){"use strict";e.createGuid=void 0;var o=f(n(25)),r=n(0),i=n(9),a=n(15),s=n(16),u=n(13),c=f(n(30));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(){var e=(0,r.getWindow)().crypto;return(p=e&&e.getRandomValues?function(){try{var t=new Int32Array(1);return e.getRandomValues(t),t[0]}catch(t){return(p=s.rand)()}}:s.rand)()},l=void 0,d=void 0;e.createGuid=function(){return(0,o.default)(function(){var t=(0,r.getWindow)();l||(e=(0,r.getNavigator)(),l=e.userAgent.replace(/\D+/g,"")+e.plugins.length,e=t.screen,d=(e.height||"")+(e.width||"")+(e.pixelDepth||""));var e=[(0,s.rand)(),l,(0,u.getDate)().getMilliseconds(),d,p(),(0,i.findCookie)("market"),(0,a.getCustomerId)()||"",(0,r.getDocument)().referrer,t.location.href,JSON.stringify(c.default.getProperties())];return t.performance&&t.performance.now&&e.push(t.performance.now()),e.join("")}(),"d9a11081-301d-478b-98df-6511799184e5")}},function(t,e,n){"use strict";e.__esModule=!0;var o=l(n(39)),r=l(n(6)),i=n(19),a=n(43),s=n(16),u=l(n(21)),c=l(n(12)),f=n(8),p=l(n(4));function l(t){return t&&t.__esModule?t:{default:t}}var d,h=(0,s.rand)(),o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(y,d=o.default),y.prototype.process=function(){var t=this;d.prototype.process.call(this,{ALL:function(){t._handleEventSvc()}})},y.prototype._handleEventSvc=function(){(0,i.sendEvent)(this.pageEvent.getProperties(),"/t/1/tl/event")},y.prototype.preProcess=function(){this.tData=new c.default,this.tData.merge(this.data.ALL.custom_properties),this.pageEvent=new r.default,this.pageEvent.set("usrin",this.tData.stringify());var t=(new u.default).getVisitInfo(),e=t.visitorGuid,t=t.visitGuid;this.pageEvent.set("cts",(new Date).getTime()),this.pageEvent.set("dh",(0,a.getHostname)()),this.pageEvent.set("dr",(0,a.getReferrer)(1e3)),this.pageEvent.set("ua",(0,a.getUserAgent)()),this.pageEvent.set("vci",h),this.pageEvent.set("cv",p.default.get("tccl.buildVersion")),this.pageEvent.set("z",(0,s.rand)()),this.pageEvent.set("vg",t),this.pageEvent.set("vtg",e),this.pageEvent.set("dp",(0,a.getPageName)());e=(0,f.getPageLevelProperties)();this.pageEvent.set("ap",e.ap||"not_set"),this.pageEvent.set("trfd",JSON.stringify(e)),this.pageEvent.set("hit_id",this.internal.eventId)},y);function y(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,d.apply(this,arguments))}e.default=o},function(t,e,n){"use strict";e.__esModule=!0,e.getObjFromTDataString=e.getObjFromTDataList=void 0;var o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(1),a=n(3),s=n(2),u=n(6),n=(o=u)&&o.__esModule?o:{default:o};function c(t){return(0,s.parseString)(t,"^",",")}var f,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,f=n.default),p.prototype.setTDataString=function(t){f.prototype.merge.call(this,c(t))},p.prototype.stringify=function(){var t=this.getProperties();(0,s.cleanKeyNames)(t,".","_");t=(0,s.stringify)(t,"^",",");if(t)return t},p.prototype.set=function(t,e){"object"!==(void 0===e?"undefined":r(e))&&"[object Function]"!=={}.toString.call(e)?f.prototype.set.call(this,t,e):(0,i.error)("Invalid key/value pair found in Traffic's custom properties (tData). Objects, arrays, and functions are not supported.\n\nKey: '"+t+"' Value: '"+e+"' Type: '"+(void 0===e?"undefined":r(e))+"'.")},p);function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,f.apply(this,arguments))}e.default=n,e.getObjFromTDataList=function(t){var e={};if((0,a.isArray)(t))for(var n=0;n<t.length;n++){var o=t[n];(0,a.isArray)(o)&&(e[o[0]]=(0,s.parseValue)(o))}return e},e.getObjFromTDataString=c},function(t,e,n){"use strict";e.getDate=e.getISODate=void 0;var o=n(14);e.getISODate=function(){return e=(t=new Date).getUTCFullYear()+"-"+(0,o.pad)(1+t.getUTCMonth()),e+="-"+(0,o.pad)(t.getUTCDate())+"T"+(0,o.pad)(t.getUTCHours())+":",e+=(0,o.pad)(t.getUTCMinutes())+":"+(0,o.pad)(t.getUTCSeconds())+".",e+=(""+(t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z";var t,e},e.getDate=function(){return new Date}},function(t,e,n){"use strict";e.pad=function(t,e){if(void 0===t)return t;void 0===e&&(e=2);for(var n=""+t;n.length<e;)n="0"+n;return n},e.startsWith=function(t,e,n){return t.substr(!n||n<0?0:+n,e.length)===e}},function(t,e,n){"use strict";e.getCustomerId=e.getClaimFromInfoToken=void 0;n(9);function o(t){return Object.keys(t).length<1}function r(){return!o(u)}function i(t,e){return t?e?(0,s.sha256)(e):void 0:e}function a(t,e,n){var o=t.typ;if(void 0===n||!o||o===n){o=t.auth;return o&&"basic"!==o?a(t[o],e,n):t[e]}}var s=n(29),u={};e.getClaimFromInfoToken=function(t){if(r())return a(u,t)},e.getCustomerId=function(t){if(r())return i(t,a(u,"info_cid"))}},function(t,e,n){"use strict";e.rand=function(){return Math.floor(2147483647*Math.random())}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(0),i=n(5),a=n(3);n(1);s.prototype.start=function(){this.loadAsyncCommands()},s.prototype.pushLog=function(t){(0,a.logToArray)(this.dataLayerLog,t)},s.prototype.process=function(){},s.prototype.push=function(t){this.loaded?this.process(t):this.asyncCommands.push(t)},s.prototype.loadAsyncCommands=function(){for(;0<this.asyncCommands.length;)this.process(this.asyncCommands.shift());this.loaded=!0},n=s;function s(t){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),this.dataLayerName=t,this.dataLayerLog=[],this.asyncCommands=[],this.loaded=!1,this.dataLayers=[],(0,a.isArray)(this.dataLayerName)||(this.dataLayerName=[this.dataLayerName]),this.dataLayerName.forEach(function(t){var e,n=(0,r.getWindow)()[t];n&&(e=o.asyncCommands).push.apply(e,n),(0,i.setWindowVar)(t,o),o.dataLayers.push(n)})}e.default=n},function(t,e,n){"use strict";e.ObjectDefinitionBlock=e.PropertyDefinitionBlock=e.SchemaDefinitionBlock=void 0;var o,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=n(3),r=n(6),s=(o=r)&&o.__esModule?o:{default:o},f=n(33);function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(e===o.type)return o}}function d(t,e){var n=t.name;return n=void 0!==e&&(t.outputKeys[e]||t.outputKeys.ALL)?t.outputKeys[e]||t.outputKeys.ALL:n}function h(t,e,n,o){var r=void 0;if(e._fieldType!==f.CALCULATED_FIELD&&(i=t[e.name],e._resolutionType===f.SUBSTITUTE&&(i=t),r=e.parse(i,n)),"object"!==u(e.transformMap))return"function"==typeof e.transformMap?e.transformMap(r,o):e.transformMap;for(var i,a=(0,c.isArray)(e.transformMap)?e.transformMap:(t=e.transformMap,i=n,n=t.ALL||[],i=t[i]||[],i=[].concat(n).concat(i),(0,c.getUnique)(i)),s=0;s<a.length;s++)r=a[s](r,o);return r=e._outputType&&e._outputType===f.STRING_TYPE?r.toString():r}function y(t,e){return t.doNotOutputList.includes(e)||t.doNotOutputList.includes("ALL")}var g=function(t,e,n,o){e=t[e];if(e){e=e;if((0,c.isArray)(e)||n){e=l(e,n);if(!e)return}o=e[o];if(o)return o}},v=(m.prototype.parse=function(t,e){if(this.validate(t),this._fieldType!==f.OPTIONAL_FIELD||t){for(var n=new s.default,o=0;o<this.properties.length;o++){var r,i=this.properties[o];0<i.sinkList.length&&!~i.sinkList.indexOf(e)||(r=h(t,i,e,n.getProperties()),i._resolutionType===f.MAPPING?n.set(d(i,e),r):y(i,e)||n.merge(r))}for(var a=0;a<this.properties.length;a++)y(this.properties[a],e)&&n.delete(d(this.properties[a],e));return n.getProperties()}},m.prototype.validate=function(t){if(this._fieldType===f.REQUIRED_FIELD&&!t)throw"Missing required property '"+this.name+"'";if(0<this.allowedValuesList.length&&!this.allowedValuesList.includes(t))throw"Input '"+t+"' for property '"+this.name+"' is not one of the allowed values ("+this.allowedValuesList+")."},m.prototype.optional=function(){return this._fieldType=f.OPTIONAL_FIELD,this},m.prototype.required=function(){return this._fieldType=f.REQUIRED_FIELD,this},m.prototype.load=function(t){for(var e=0;e<this.properties.length;e++){var n=this.properties[e];n.commandSchemaDefinitions=this.commandSchemaDefinitions,n.load(t)}},m.prototype.stringify=function(){for(var t=new s.default,e=0;e<this.properties.length;e++){var n=this.properties[e];t.merge(n.stringify())}return t.getProperties()},m.prototype.clean=function(){for(var t=0;t<this.properties.length;t++)this.properties[t].clean();this.properties=[]},m.prototype.transform=function(t){return this.transformMap=t,this},m.prototype.transformKeys=function(t){return this.outputKeys=t,this},m.prototype.sinks=function(t){return this.sinkList=t,this},m.prototype.allowedValues=function(t){return this.allowedValuesList=t,this},m.prototype.doNotOutput=function(t){return void 0===t?this.doNotOutputList=["ALL"]:"string"==typeof t?this.doNotOutputList=[t]:(0,c.isArray)(t)&&(this.doNotOutputList=t),this},m.prototype.outputType=function(t){return this._outputType=t,this},m);function m(t){p(this,m),this.name=t,this.properties=[],this.definitionType="",this._outputType,this._resolutionType=f.MAPPING,this._fieldType=f.OPTIONAL_FIELD,this.doNotOutputList=[],this.outputKeys={},this.sinkList=[],this.commandSchemaDefinitions={},this.transformMap={},this.allowedValuesList=[]}var b,_=(a(w,b=v),w.prototype.load=function(t){this.properties=this.properties.concat(this.schema.data),b.prototype.load.call(this,t)},w.prototype.parse=function(t,e){var n=e||this.schema.sinks||[],o={};if(this.schema.data&&0<this.schema.data.length)try{~n.indexOf("ALL")||(n=n.concat(["ALL"]));for(var r=0;r<n.length;r++){var i=n[r];this.load(i),o[i]=b.prototype.parse.call(this,t||{},i),this.clean()}}catch(t){throw""}return Object.freeze(o)},w);function w(t,e,n,o){p(this,w);e=i(this,b.call(this,e));return e.commandSchemaDefinitions=t,e.type=n,e.version=o,e.definitionType="Schema",e.schema=g(e.commandSchemaDefinitions,e.name,e.type,e.version),e}var E,L=(a(S,E=v),S.prototype.parse=function(t){return this.validate(t),t},S.prototype.stringify=function(){var t={};return t[this.name]=this._fieldType,t},S);function S(t){return p(this,S),i(this,E.call(this,t))}var T,n=(a(P,T=v),P.prototype.load=function(t){this.properties=this.properties.concat(this.objDefinitions),this.extraDefinitions&&(this.properties=this.properties.concat(this.extraDefinitions)),T.prototype.load.call(this,t)},P.prototype.stringify=function(){if(this._resolutionType!==f.MAPPING)return T.prototype.stringify.call(this);var t={};return t[this.name+" ("+this._fieldType+")"]=T.prototype.stringify.call(this),t},P.prototype.substitute=function(t){return this.objDefinitions=t,this._resolutionType=f.SUBSTITUTE,this},P.prototype.map=function(t,e){return this.name=t,this.objDefinitions=e,this._resolutionType=f.MAPPING,this},P.prototype.extend=function(t){return this.extraDefinitions=t,this},P);function P(){p(this,P);var t=i(this,T.call(this));return t.objDefinitions=[],t.definitionType="Object",t}var O;a(C,O=n),C.prototype.parse=function(t,e){if(t&&!(0,c.isArray)(t))throw"";if(this.minElements&&(!t||t.length<this.minElements))throw"";var n=[];if(t)for(var o=0;o<t.length;o++)n.push(O.prototype.parse.call(this,t[o],e));return n},C.prototype.stringify=function(){if(this._resolutionType!==f.MAPPING)return O.prototype.stringify.call(this);var t={};t[this.minElements+"...n"]=O.prototype.stringify.call(this)[this.name+" ("+this._fieldType+")"];var e={};return e[this.name+" ("+this._fieldType+")"]=t,e},C.prototype.withMinElements=function(t){return this.minElements=t,this._fieldType=0<t?f.REQUIRED_FIELD:f.OPTIONAL_FIELD,this};function C(){p(this,C);var t=i(this,O.call(this));return t.definitionType="Collection",t.minElements=0,t}var D;a(j,D=v);function j(t){p(this,j);t=i(this,D.call(this,t));return t._fieldType=f.CALCULATED_FIELD,t}e.SchemaDefinitionBlock=_,e.PropertyDefinitionBlock=L,e.ObjectDefinitionBlock=n},function(t,e,n){"use strict";e.sendEvent=e.init=void 0;function o(){return(0,s.buildCorporateUrl)("events.api")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(20),a=n(2),s=n(41),u=n(42),c=n(5),f="_trfqSendLog";e.init=function(){(0,c.setInternalVar)("_trfqSendLog",[])},e.sendEvent=function(t,e){var n,e=o()+e,t=(0,i.encodeProperties)((n={},(0,a.map)(t,function(t,e){void 0!==e&&"object"!==(void 0===e?"undefined":r(e))&&"[object Function]"!=={}.toString.call(e)&&(n[t]=e)}),n)),e=(0,i.assembleUrl)(t,e);(0,u.makeRequest)(e,(0,a.stringify)(t,"&","="),"GET",null,f)}},function(t,e,n){"use strict";e.getQueryStringParameter=e.assembleUrl=e.encodeProperties=void 0;function i(){var t=(0,o.getWindow)().location.search;return""===t?[]:(t=(0,a.startsWith)(t,"?")?t.substring(1):t).split("&")}var o=n(0),r=n(2),a=(n(40),n(14));e.encodeProperties=function(t){var n={};return(0,r.map)(t,function(t,e){void 0!==e&&(n[t]=encodeURIComponent(e))}),n},e.assembleUrl=function(t,e){var n=~e.indexOf("?")?"&":"?";return e+n+(0,r.stringify)(t,"&","=")},e.getQueryStringParameter=function(t,e){for(var n=i(),o=n.length-1;0<=o;o--){var r=n[o].split("=");if(e){if((r[0]+"").toLowerCase()==(t+"").toLowerCase())return r[1]}else if(r[0]===t)return r[1]}}},function(t,e,n){"use strict";e.__esModule=!0;var o,r=n(9),i=n(10),a=n(44),n=(o=a)&&o.__esModule?o:{default:o};var s,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.getVisitInfo=function(){var t="_tccl_visitor",e="_tccl_visit",n=(0,r.findCookie)(t),o=(0,r.findCookie)(e);return n||o?(n=n||(0,i.createGuid)(),o=o||(0,i.createGuid)()):n=o=(0,i.createGuid)(),(0,r.setCookie)(t,n,525600,"/"),(0,r.setCookie)(e,o,30,"/"),{visitorGuid:n,visitGuid:o}},u);function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.apply(this,arguments))}e.default=n},function(t,e,n){"use strict";var o=n(5),r=n(0),i=n(1),a=n(8),s=b(n(24)),u=n(31),c=n(7),f=b(n(32)),p=b(n(34)),l=n(35),d=b(l),h=b(n(37)),y=b(n(21)),g=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(47)),v=n(50),m=n(19);function b(t){return t&&t.__esModule?t:{default:t}}function _(){var t;w||(w=!0,(0,v.observePerfMetrics)(),d.default.init("complete"===(0,r.getDocument)().readyState,function(t){(0,r.getWindow)().addEventListener("load",t)}),(0,m.init)(),(new y.default).getVisitInfo(),t=new s.default({schemaHelper:new f.default(h.default),pageViewSchema:"add_page_view",autoPageViewDisabled:!1,immediateSchemas:[]}),d.default.registerOnLoadFn(function(){t.start(),(0,u.init)(g),p.default.get(E+".perfOn")&&(0,v.getPerformanceData)(E,"auto")}),(0,i.log)("TCCL STARTED",p.default.getProperties()))}var w=!1,E="tccl";(0,l.withCookieCache)(function(){var t,e;(0,r.isSupported)()&&((0,o.setClientName)(E),(0,a.init)("_trfd",[E]),(0,c.init)((e=p.default.get(E+".baseHost"))?"secureserver.net"===e?"prod":"test-secureserver.net"===e?"test":"dev":p.default.get(E+".buildEnv")),(0,o.libraryLoaded)()?(0,i.error)("TCCL Library has already been loaded on page"):"prerender"!==(t=(0,r.getDocument)()).visibilityState?_():t.addEventListener("visibilitychange",function(){"prerender"!==t.visibilityState&&"unloaded"!==t.visibilityState&&_()}))})},function(t,e,n){"use strict";e.buildMessage=function(){return""}},function(t,e,n){"use strict";e.__esModule=!0;var o,s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(1)),u=n(10),r=n(17),i=(o=r)&&o.__esModule?o:{default:o},c=n(8);var f,a=["_expDataLayer","_signalsDataLayer"],i=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,f=i.default),p.prototype.push=function(t){return this.immediateSchemas.includes(t.schema)?this.process(t):f.prototype.push.call(this,t)},p.prototype._initEvents=function(){for(var t=!this.autoPageViewDisabled,e=this.asyncCommands.length-1;0<=e;e--){var n=this.asyncCommands[e];n.schema!==this.pageViewSchema||n.data&&n.data.virtual_path||(t=!1),"set_config"===n.schema&&this.process.apply(this,this.asyncCommands.splice(e,1))}t&&this.process({schema:this.pageViewSchema})},p.prototype.process=function(e){f.prototype.pushLog.call(this,e);try{var t=e.data,n=e.schema,o=e.type,r=e.version||"v1",i=e.sinks,a={eventId:(0,u.createGuid)()};this.onProcess&&this.onProcess(),(0,c.processPageLevelProperties)(),this.schemaHelper.handleSchema(n,o,r,t,a,i)}catch(t){e=["Unable to process",e,"\n\n"];s.error.apply(s,e.concat(t))}},p);function p(t){var e=t.schemaHelper,n=t.pageViewSchema,o=t.autoPageViewDisabled,r=t.onProcess,i=t.immediateSchemas;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,f.call(this,a));return t.schemaHelper=e,t.pageViewSchema=n,t.autoPageViewDisabled=o,t.onProcess=r,t.immediateSchemas=i,t._initEvents(),t}e.default=i},function(t,e,n){var o=n(26),n=n(28);t.exports=o("v5",80,n)},function(t,e,n){var f=n(27);t.exports=function(t,u,c){function e(t,e,n,o){var r,i=n&&o||0;if("string"==typeof t&&(t=function(t){for(var e=Array((t=unescape(encodeURIComponent(t))).length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(t)),"string"==typeof e&&(r=[],e.replace(/[a-fA-F0-9]{2}/g,function(t){r.push(parseInt(t,16))}),e=r),!Array.isArray(t))throw TypeError("value must be an array of bytes");if(!Array.isArray(e)||16!==e.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var a=c(e.concat(t));if(a[6]=15&a[6]|u,a[8]=63&a[8]|128,n)for(var s=0;s<16;++s)n[i+s]=a[s];return n||f(a)}try{e.name=t}catch(t){}return e.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",e.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",e}},function(t,e){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);t.exports=function(t,e){return e=e||0,""+n[t[e++]]+n[t[e++]]+n[t[e++]]+n[t[e++]]+"-"+n[t[e++]]+n[t[e++]]+"-"+n[t[e++]]+n[t[e++]]+"-"+n[t[e++]]+n[t[e++]]+"-"+n[t[e++]]+n[t[e++]]+n[t[e++]]+n[t[e++]]+n[t[e++]]+n[t[e++]]}},function(t,e,n){"use strict";function v(t,e){return t<<e|t>>>32-e}t.exports=function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var o=unescape(encodeURIComponent(t));t=Array(o.length);for(var r=0;r<o.length;r++)t[r]=o.charCodeAt(r)}t.push(128);for(var i=t.length/4+2,a=Math.ceil(i/16),s=Array(a),r=0;r<a;r++){s[r]=Array(16);for(var u=0;u<16;u++)s[r][u]=t[64*r+4*u]<<24|t[64*r+4*u+1]<<16|t[64*r+4*u+2]<<8|t[64*r+4*u+3]}for(s[a-1][14]=8*(t.length-1)/4294967296,s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(t.length-1)&4294967295,r=0;r<a;r++){for(var c=Array(80),f=0;f<16;f++)c[f]=s[r][f];for(f=16;f<80;f++)c[f]=v(c[f-3]^c[f-8]^c[f-14]^c[f-16],1);for(var p=n[0],l=n[1],d=n[2],h=n[3],y=n[4],f=0;f<80;f++)var g=Math.floor(f/20),g=v(p,5)+function(t,e,n,o){switch(t){case 0:return e&n^~e&o;case 1:return e^n^o;case 2:return e&n^e&o^n&o;case 3:return e^n^o}}(g,l,d,h)+y+e[g]+c[f]>>>0,y=h,h=d,d=v(l,30)>>>0,l=p,p=g;n[0]=n[0]+p>>>0,n[1]=n[1]+l>>>0,n[2]=n[2]+d>>>0,n[3]=n[3]+h>>>0,n[4]=n[4]+y>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}},function(t,e,n){"use strict";e.sha256=function(t){function m(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function b(t,e){return t>>>e|t<<32-e}function _(t,e){return t>>>e}return function(t){for(var e="0123456789abcdef",n="",o=0;o<4*t.length;o++)n+=(e[0|t[o>>2]>>8*(3-o%4)+4&15]||"")+(e[0|t[o>>2]>>8*(3-o%4)&15]||"");return n}(function(t,e){var n,o,r,i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],s=Array(64),u=void 0,c=void 0,f=void 0,p=void 0,l=void 0,d=void 0,h=void 0,y=void 0,g=void 0,v=void 0;for(t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e,g=0;g<t.length;g+=16){for(u=a[0],c=a[1],f=a[2],p=a[3],l=a[4],d=a[5],h=a[6],y=a[7],v=0;v<64;v++)s[v]=v<16?t[v+g]:m(m(m((r=s[v-2],b(r,17)^b(r,19)^_(r,10)),s[v-7]),(r=s[v-15],b(r,7)^b(r,18)^_(r,3))),s[v-16]),n=m(m(m(m(y,b(l,6)^b(l,11)^b(l,25)),l&d^~l&h),i[v]),s[v]),o=m(b(u,2)^b(u,13)^b(u,22),u&c^u&f^c&f),y=h,h=d,d=l,l=m(p,n),p=f,f=c,c=u,u=m(n,o);a[0]=m(u,a[0]),a[1]=m(c,a[1]),a[2]=m(f,a[2]),a[3]=m(p,a[3]),a[4]=m(l,a[4]),a[5]=m(d,a[5]),a[6]=m(h,a[6]),a[7]=m(y,a[7])}return a}(function(t){for(var e=[],n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<24-n%32;return e}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?e+=String.fromCharCode(o):(127<o&&o<2048?e+=String.fromCharCode(o>>6|192):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128)),e+=String.fromCharCode(63&o|128))}return e}(t)),8*t.length))}},function(t,e,n){"use strict";e.__esModule=!0;var o,r=n(6);n=new((o=r)&&o.__esModule?o:{default:o}).default;e.default=n},function(t,e,n){"use strict";e.init=void 0;var o,r=n(1),i=n(17),n=(o=i)&&o.__esModule?o:{default:o};var a,s="_trfq",u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,a=n.default),c.prototype.process=function(e){a.prototype.pushLog.call(this,e);try{var t=Array.prototype.slice.call(e,1),n=e[0];this.handlers[n]?this.handlers[n].apply(null,t):(0,r.error)("Invalid command sent to data layer",this.dataLayerName,e)}catch(t){(0,r.error)("Unable to process",e,t)}},c);function c(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,s));return e.handlers=t,e.start(),e}e.init=function(t){return new u(t)}},function(t,e,n){"use strict";e.__esModule=!0;var a=n(18);o.prototype.handleSchema=function(t,e,n,o,r,i){n=new a.SchemaDefinitionBlock(this.commandSchemaDefinitions,t,e,n);n.schema.handler&&(i=i||n.schema.sinks||[],o=n.parse(o,i),new n.schema.handler(this).load(n.type,n.version,i,o,r,n.schema.config))},n=o;function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.commandSchemaDefinitions=t}e.default=n},function(t,e,n){"use strict";e.STRING_TYPE="string",e.OPTIONAL_FIELD="OPTIONAL",e.REQUIRED_FIELD="REQUIRED",e.CALCULATED_FIELD="CALCULATED",e.MAPPING="map",e.SUBSTITUTE="sub"},function(t,e,n){"use strict";e.__esModule=!0;var o,r=n(4),n=(o=r)&&o.__esModule?o:{default:o};n.default.merge({"tccl.perfOn":!0,"tccl.buildVersion":"2.0.2","tccl.buildEnv":"prod","tccl.buildName":"tccl"}),e.default=n.default},function(t,e,n){"use strict";e.__esModule=!0,e.withCookieCache=void 0;var o,r=n(0),i=n(36);n=new((o=i)&&o.__esModule?o:{default:o}).default;e.default=n,e.withCookieCache=function(t){try{var e=(0,r.getDocument)().cookie,n=void 0;Object.defineProperty(document,"cookie",{get:function(){return e},set:function(t){(n=n||Object.getOwnPropertyDescriptor(Document.prototype,"cookie")).set.call(document,t),e=n.get.call(document)},configurable:!0,enumerable:!0}),t()}finally{delete(0,r.getDocument)().cookie}}},function(t,e,n){"use strict";e.__esModule=!0;var o=n(1);r.prototype._executeFn=function(e){try{e()}catch(t){(0,o.error)("Exception while executing onLoad callback",e,t)}},r.prototype._triggerOnLoad=function(){this._loaded=!0;for(var t=0;t<this._onLoadFns.length;t++)this._executeFn(this._onLoadFns[t])},r.prototype.registerOnLoadFn=function(t){var e;(e=t)&&"[object Function]"==={}.toString.call(e)&&(this._loaded?this._executeFn(t):this._onLoadFns.push(t))},r.prototype.init=function(t,e){this._loaded=!1,this._onLoadFns=[],t?this._loaded=!0:e(this._triggerOnLoad.bind(this))},n=r;function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r)}e.default=n},function(t,e,n){"use strict";e.__esModule=!0;var o=n(18),r=s(n(38)),i=s(n(45)),a=s(n(46));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){return[new o.PropertyDefinitionBlock("custom_properties").optional()]},n=function(){return[new o.PropertyDefinitionBlock("eid").optional()]},u={add_event:{v1:{handler:r.default,data:[new o.PropertyDefinitionBlock("type").required(),(new o.ObjectDefinitionBlock).substitute(n()),(new o.ObjectDefinitionBlock).substitute(u())]}},add_page_view:{v1:{handler:i.default,data:[new o.PropertyDefinitionBlock("path").optional(),(new o.ObjectDefinitionBlock).substitute(n()),(new o.ObjectDefinitionBlock).substitute(u())]}},add_perf:{v1:{handler:a.default,data:[new o.PropertyDefinitionBlock("timing_object").required(),new o.PropertyDefinitionBlock("is_hard_navigation").optional(),(new o.ObjectDefinitionBlock).substitute(u())]}}};e.default=u},function(t,e,n){"use strict";e.__esModule=!0;var o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(11),n=(o=i)&&o.__esModule?o:{default:o};var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,a=n.default),s.prototype.preProcess=function(){a.prototype.preProcess.call(this),this._setPageEventTcclProperties()},s.prototype._setPageEventTcclProperties=function(){this.pageEvent.set("ht","pageevent"),this.pageEvent.set("ea",this.data.ALL.type),this.pageEvent.set("eid",this.data.ALL.eid),"object"===r(this.data.ALL.fields_object)&&this.pageEvent.merge(this.data.ALL.fields_object)},s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.apply(this,arguments))}e.default=n},function(t,e,n){"use strict";e.__esModule=!0;var o=n(2);r.prototype.preProcess=function(){},r.prototype.load=function(t,e,n,o,r,i){this.schemaType=t,this.schemaVersion=e,this.sinks=["ALL"].concat(n),this.data=o,this.internal=r||{},this.config=i||{},this.preProcess(),this.process()},r.prototype.process=function(t){var n=this;this.sinks&&0<this.sinks.length&&(0,o.map)(t,function(t,e){~n.sinks.indexOf(t)&&e(n.data[t])})},n=r;function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.schemaHelper=t}e.default=n},function(t,e,n){"use strict";e.removePII=void 0;n(1);var a=[{name:"EMAIL",regex:/[^@^=]+@[^@]+\.[^@^&]+/}];e.removePII=function(t,e){if("string"!=typeof t)return t;for(var n=t,o=0;o<a.length;o++)for(var r=a[o].regex,i=n.match(r);i&&i[0];)i=(n=n.replace(i[0],"REDACTED")).match(r);return n}},function(t,e,n){"use strict";e.buildCorporateUrl=void 0;n(20),n(15);var o,r=n(0),i=n(7),a=n(4);(o=a)&&o.__esModule,n(10),n(8),n(9);function s(){if(u)return u;var t,e=(0,r.getBaseHost)();return"secureserver.net"===(e=(0,r.isCorporateHost)(e)?e:"secureserver.net")&&(e="prod"===(t=(0,i.getEnvName)())?e:t+"-"+e),u=e}var u=void 0;e.buildCorporateUrl=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return"https://"+(t?t+".":"")+s()}},function(t,e,n){"use strict";e.makeRequest=void 0;function l(t,e,n,o,r){r={endpoint:e,queryParams:n,method:o,payload:r},(0,a.logToArray)((0,i.getInternalVar)(t),r)}var i=n(5),d=n(0),a=n(3),h=(n(1),n(2)),n=(0,d.getWindow)().Request,y=n&&"keepalive"in new n(""),g=void 0!==(0,d.getNavigator)().sendBeacon;e.makeRequest=function(t,e,n,o,r,i,a){var s=(0,h.merge)({},i),u=o?JSON.stringify(o):null;"POST"===n&&(s["Content-Type"]="application/json");var c,f=void 0;if(g&&!s.Authorization&&"POST"===n)try{var p=(0,d.getWindow)().Blob,f=(0,d.getNavigator)().sendBeacon(t,new p([u],s))}catch(t){f=!1}f||(i=(0,d.getWindow)().fetch,y&&i?i(t,{keepalive:!0,method:n,headers:s,body:u,credentials:a}):(f=t,i=n,a=u,u=s,(s=(0,d.getWindow)().XMLHttpRequest)&&((c=new s).open(i,f,!0),(0,h.map)(u,function(t,e){c.setRequestHeader(t,e)}),c.send(a)))),l(r,t,e,n,o)}},function(t,e,n){"use strict";var n=n(0),o=n.getDocument,r=n.getWindow,i=n.getNavigator;e.getHostname=function(){return r().location.hostname},e.getPageName=function(t){return"string"!=typeof(t=t||r().location.pathname)||void 0===t||""===t?"notspecified":(t=t.lastIndexOf("/")==t.length-1?t.substring(0,t.length-1):t).indexOf("/")?"/"+t:t},e.getReferrer=function(t){var e=o().referrer;return void 0!==e?e.substr(0,t):void 0},e.getUserAgent=function(){return i().userAgent}},function(t,e,n){"use strict";e.__esModule=!0;var o=(r.prototype.getVisitInfo=function(){},r);function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r)}e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(11),n=(o=i)&&o.__esModule?o:{default:o};var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,a=n.default),s.prototype.preProcess=function(){a.prototype.preProcess.call(this),this._setPageViewTcclProperties()},s.prototype._setPageViewTcclProperties=function(){this.pageEvent.set("ht","pageview"),this.pageEvent.set("eid",this.data.ALL.eid),"object"===r(this.data.ALL.fields_object)&&this.pageEvent.merge(this.data.ALL.fields_object)},s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.apply(this,arguments))}e.default=n},function(t,e,n){"use strict";e.__esModule=!0;var o,r=n(11),n=(o=r)&&o.__esModule?o:{default:o};var i,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=n.default),a.prototype.preProcess=function(){i.prototype.preProcess.call(this),this._setPerfTcclProperties()},a.prototype._setPerfTcclProperties=function(){this.pageEvent.set("ht","perf");var t=this.data.ALL.timing_object||{};this.pageEvent.merge("navigationStart"in t?{tce:t.connectEnd,tcs:t.connectStart,tdc:t.domComplete,tdclee:t.domContentLoadedEventEnd,tdcles:t.domContentLoadedEventStart,tdi:t.domInteractive,tdl:t.domLoading,tdle:t.domainLookupEnd,tdls:t.domainLookupStart,tfs:t.fetchStart,tns:t.navigationStart,trqs:t.requestStart,tre:t.responseEnd,trps:t.responseStart,tles:t.loadEventStart,tlee:t.loadEventEnd,nt:t.navigationType,lcp:t.largestContentfulPaint}:t),this.data.ALL.is_hard_navigation?this.pageEvent.set("nav_type","hard"):this.pageEvent.set("nav_type","soft")},a);function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.apply(this,arguments))}e.default=n},function(t,e,n){"use strict";e.__esModule=!0,e.cmdLogPerf=e.cmdLogEvent=void 0;var o=r(n(48)),n=r(n(49));function r(t){return t&&t.__esModule?t:{default:t}}e.cmdLogEvent=o.default,e.cmdLogPerf=n.default},function(t,e,n){"use strict";e.__esModule=!0;var r=n(0),i=n(12);e.default=function(t,e,n,o){(0,r.getWindow)()._expDataLayer.push({schema:"add_event",version:"v1",data:{type:t,eid:e,custom_properties:(0,i.getObjFromTDataList)(n),fields_object:o}})}},function(t,e,n){"use strict";e.__esModule=!0;var o=n(0),r=n(12);e.default=function(t,e){(0,o.getWindow)()._expDataLayer.push({schema:"add_perf",version:"v1",data:{timing_object:t,custom_properties:(0,r.getObjFromTDataList)(e)}})}},function(t,e,n){"use strict";e.observePerfMetrics=e.getPerformanceData=void 0;var o,f=n(1),p=n(0),r=n(2),i=n(4),a=(o=i)&&o.__esModule?o:{default:o},l=n(3);function d(t,e,n){for(var o=0;o<n.length;o++){var r=n[o],i=e[r];void 0!==i&&(t[r]=Math.round(i))}}function s(t,e){var n,o,r,i,a,s,u,c={};"tcc"===t&&(c.tccin=e||"na");try{(h=(0,p.getWindow)().performance)&&h.timing?(d(a=c,h.timing,v),!h.getEntriesByName||(u=!(u=h.getEntriesByName((0,p.getDocument)().location.href)[0])&&h.getEntriesByType?(s=h.getEntriesByType("navigation"))[s.length-1]:u)&&(d(a,u,m),a.navigationType=u.type),"tcc"===t&&(r=c,h.getEntriesByType&&(i=h.getEntriesByType("mark"),(0,l.isArray)(i)&&(r.marks=i.slice(0,10).map(function(t){return{name:t.name,startTime:Math.round(t.startTime)}}),i=h.getEntriesByType("measure"),(0,l.isArray)(i)&&(r.measures=i.slice(0,10).map(function(t){return{name:t.name,duration:Math.round(t.duration)}})))),n=c,!h.getEntriesByType||(o=h.getEntriesByType("paint"))&&o.forEach(function(t){n[g[t.name]]=Math.round(t.startTime)}))):("tcc"===t&&(c.tccperfapi="not supported"),(0,f.error)("Error loading performance lib"))}catch(t){(0,f.error)("_collect unable to get performance data",t)}return c}function u(t,e,n){setTimeout(function(){(0,p.getWindow)()._expDataLayer=(0,p.getWindow)()._expDataLayer||[],(0,p.getWindow)()._expDataLayer.push({schema:"add_perf",version:"v1",data:"tcc"===t?{type:"pageperf",properties:(0,r.merge)(e,y,{nav_type:"hard"}),custom_properties:n}:{timing_object:(0,r.merge)(e,{largestContentfulPaint:y.lcp}),is_hard_navigation:!0,custom_properties:n}})},0)}function c(){return!(h=(0,p.getWindow)().performance)||!h.timing||0<h.timing.loadEventStart}var h=void 0,y={},g={"first-paint":"fp","first-contentful-paint":"fcp"},v=["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","navigationStart","requestStart","responseEnd","responseStart","loadEventStart","loadEventEnd"],m=["transferSize","encodedBodySize","decodedBodySize"],b=!1;e.getPerformanceData=function(t,e,n){var o,r;"manual"!==e&&b||(b=!0,c()?u(t,s(t,e),n):(o=a.default.get(t+".perfDelayMs")||250,r=setInterval(function(){c()&&(clearInterval(r),u(t,s(t,e),n))},o)))},e.observePerfMetrics=function(){var t=(0,p.getWindow)();if(t.PerformanceObserver){t=new t.PerformanceObserver(function(t){t=t.getEntries(),t=t[t.length-1];t.renderTime&&(y.lcp=Math.round(t.startTime))});try{t.observe({type:"largest-contentful-paint",buffered:!0})}catch(t){}}}}],o={},r.m=n,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=22);function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,o});
//# sourceMappingURL=tccl.min.js.map